<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Details</title>

    <!-- Include Bootstrap CSS (Choose the version you want) -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- Include DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap4.min.css">

    <!-- Include DataTables Buttons CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.0.1/css/buttons.dataTables.min.css">
</head>
<body>

    <div class="container">
        <h1>User Details</h1>

        <div class="table-responsive">
            <table id="itemTable" class="table table-striped table-bordered">
                <thead>
                    <tr>
                        <th>USER ID</th>
                        <th>ROLE</th>
                        <th>USER NAME</th>
                        <th>USER EMAIL</th>
                        <th>AUTH FLAG</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user_data in data %}
                        <tr>
                            <td>{{ user_data.USERID }}</td>
                            <td>{{ user_data.ROLE }}</td>
                            <td>{{ user_data.USER_NAME }}</td>
                            <td>{{ user_data.USER_EMAIL }}</td>
                            <td>{{ user_data.AUTH_FLAG }}</td>
                        </tr>
                    {% endfor %}
                    <!-- Add more rows with user details as needed -->
                </tbody>
            </table>
        </div>

        <!-- Manually added button to trigger CSV download -->
        <button id="csvDownloadBtn" class="btn btn-primary">Download CSV</button>
    </div>

    <!-- Include jQuery, Bootstrap, DataTables, and DataTables Buttons JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.0.1/js/buttons.html5.min.js"></script>

    <script>
        // Initialize DataTable
        $(document).ready(function() {
            var dataTable = $('#itemTable').DataTable({
                buttons: [
                    {
                        extend: 'csvHtml5',
                        text: 'Download CSV',
                        className: 'btn btn-primary'
                    }
                ]
            });

            // Manually added button click event to trigger CSV download
            $('#csvDownloadBtn').on('click', function() {
                dataTable.button('.buttons-csv').trigger();
            });
        });
    </script>

</body>
</html>
